# 在ts中实现对数据进行正则校验函数实现
## 实现
对于一个属性的验证规则以及对应的属性提示
```ts
/**
 * 字段格式验证正则和提示消息
 */
export type PropertiesRule = {
  //规则
  regExp: RegExp;
  //提示消息
  message: string;
};

```

通用函数验证
```ts
export function propertiesConfine<T, K extends keyof T>(value: T, rule: Record<K, PropertiesRule>): boolean {
    //是否校验成功
    let result: boolean = true;
    //获取所有keys
    const keys: Array<K> = Object.keys(rule) as Array<K>;

    keys.forEach((key:K) => {
        //如果校验字段所对应的值存在
        if (value[key] != undefined) {
            //通过正则比较
            if (!rule[key].regExp.test(value[key] as string)) {
                //不满足
                result = false;
            }
        }
    });
    return result;
}
```
## 测试
对于一个对象进行全对象验证,必须指定第二个为全属性,如下
```ts
interface User{
    name:string
    age:number
}

const user:User = {
    name:"Snow",
    age:19
}

const result = propertiesConfine<User,keyof User>(user,{
    name:{} as FormVerify,
    age:{} as FormVerify
})

```

对于对象的限定属性限制,则需要指定第二个泛型的具体联合类型且必须来源于第一个泛型
```ts
interface User{
    name:string
    age:number
}

const user:User = {
    name:"Snow",
    age:19
}

const result = propertiesConfine<User,"name">(user,{
    name:{} as FormVerify
})
```

::: tip
函数通过第二个泛型参数进行验证,如果指定的该类型所对应的值没有定义,那么就不会进行验证
:::

